@{
    ViewBag.Title = "Customer2";
    Layout = "~/Views/Shared/_MasterApplication.cshtml";
}

<style>
    .bgButton {
        text-align: center;
        background-color: #337ab7;
        cursor: pointer;
        /*height: 69px;*/
        position: fixed;
        bottom: 0;
        left: 0;
        margin-top: 50px;
    }

    .btnNext {
        padding: 10px;
        font-size: 25px;
        color: #fff;
        background-color: #337ab7;
        border-color: transparent;
        position: fixed;
        bottom: 0;
        left: 0;
        width: 100%;
    }
</style>
<div class="container-fluid">
    <div class="row">
        <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 bg-primary text-white">
            <h3>Customer</h3>
        </div>
    </div>
    <form action="@Url.Action("Customer2")" method="post" enctype="multipart/form-data" class="form-horizontal">
        <fieldset>
            <div class="container-fluid">
                <div class="row">
                    <div class="col-sm-12 col-lg-12">
                        <div class="form-group form-group-lg">
                            <hr />
                            <label class="col-sm-4 col-lg-4 control-label">เลขที่บัตรประชาชน</label>
                            <div class="col-sm-5 col-lg-5">
                                <input type="number" name="id_card" id="id_card" class="form-control" value="" readonly="readonly">
                            </div>
                            @*<div class="col-sm-2 col-lg-2">
                                        <button type="button" id="btnCheck" name="btnCheck" class="btn btn-info" style="width: 100%">Check</button>
                                </div>*@
                        </div>
                    </div>
                </div>

                <div class="row">
                    <div class="col-sm-12 col-lg-12">
                        <div class="form-group form-group-lg">
                            <label class="col-sm-4 col-lg-4 control-label" for="titleName">คำนำหน้า</label>
                            <div class="col-sm-5 col-lg-5">
                                <select name="titleName" id="titleName" class="form-control select2" disabled="disabled">
                                    @foreach (var itm in ViewBag.TitleName)
                                    {
                                        <option value="@itm.TempCode" @(itm.TempCode == ViewBag.obj.Title_id ? "selected" : "")>@itm.TitleDetail</option>
                                    }
                                </select>
                            </div>
                        </div>
                    </div>

                    <div class="col-sm-12 col-lg-12">
                        <div class="form-group form-group-lg">
                            <label class="col-sm-4 col-lg-4 control-label" for="firstName">ชื่อ</label>
                            <div class="col-sm-5 col-lg-5">
                                <input type="text" name="firstName" id="firstName" class="form-control" value="" readonly="readonly">
                            </div>
                        </div>
                    </div>
                </div>

                <div class="row">
                    <div class="col-sm-12 col-lg-12">
                        <div class="form-group form-group-lg">
                            <label class="col-sm-4 col-lg-4 control-label" for="lastName">สกุล</label>
                            <div class="col-sm-5 col-lg-5">
                                <input type="text" name="lastName" id="lastName" class="form-control" value="" readonly="readonly">
                            </div>
                        </div>
                    </div>
                </div>

                <div class="row">
                    <div class="col-sm-12 col-lg-12">
                        <div class="form-group form-group-lg">
                            <label class="col-sm-4 col-lg-4 control-label" for="birthdate">วันเกิด</label>
                            <div class="col-sm-5 col-lg-5">
                                <input type="date" name="birthdate" id="birthdate" class="form-control" value="" required="required" readonly="readonly">
                            </div>
                        </div>
                    </div>
                </div>

                <div class="row">
                    <div class="col-sm-12 col-lg-12">
                        <div class="form-group form-group-lg">
                            <label class="col-sm-4 col-lg-4 control-label" for="passport">Passport</label>
                            <div class="col-sm-5 col-lg-5">
                                <input type="text" name="passport" id="passport" class="form-control" value="">
                            </div>
                        </div>
                    </div>
                </div>

                <div class="row">
                    <div class="col-sm-12 col-lg-12">
                        <div class="form-group form-group-lg">
                            <label class="col-sm-4 col-lg-4 control-label" for="officercard">บัตรข้าราชการ</label>
                            <div class="col-sm-5 col-lg-5">
                                <input type="text" name="officercard" id="officercard" class="form-control" value="">
                            </div>
                        </div>
                    </div>
                </div>

                <div class="row">
                    <div class="col-sm-12 col-lg-12">
                        <div class="form-group form-group-lg">
                            <label class="col-sm-4 col-lg-4 control-label" for="sex">เพศ</label>
                            <div class="col-sm-5 col-lg-5">
                                <select name="sex" id="sex" class="form-control select2 checkNA">
                                    @foreach (var item in ViewBag.Sex)
                                    {
                                        <option value="@item.SexCode" @(item.SexCode == ViewBag.obj.Sex_id ? "selected" : "")>@item.SexDetail</option>
                                    }
                                </select>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="row">
                    <div class="col-sm-12 col-lg-12">
                        <div class="form-group form-group-lg">
                            <label class="col-sm-4 col-lg-4 control-label" for="maritalstatus">สถานภาพสมรส</label>
                            <div class="col-sm-5 col-lg-5">
                                <select name="maritalstatus" id="maritalstatus" class="form-control select2">
                                    @foreach (var item in ViewBag.MaritalStatus)
                                    {
                                        <option value="@item.MaritalStatusCode" @(item.MaritalStatusCode == ViewBag.obj.MaritalStatus_id ? "selected" : "")>@item.MaritalStatusDetail</option>
                                    }
                                </select>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="row">
                    <div class="col-sm-12 col-lg-12">
                        <div class="form-group form-group-lg">
                            <label class="col-sm-4 col-lg-4 control-label" for="bloodtype">กรุ๊ปเลือด</label>
                            <div class="col-sm-5 col-lg-5">
                                <select name="bloodtype" id="bloodtype" class="form-control select2">
                                    @foreach (var item in ViewBag.BloodType)
                                    {
                                        <option value="@item.BloodTypeCode" @(item.BloodTypeCode == ViewBag.obj.BloodType ? "selected" : "")>@item.BloodTypeDetail</option>
                                    }
                                </select>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="row">
                    <div class="col-sm-12 col-lg-12">
                        <div class="form-group form-group-lg">
                            <label class="col-sm-4 col-lg-4 control-label" for="weight">น้ำหนัก</label>
                            <div class="col-sm-5 col-lg-5">
                                <input type="text" name="weight" id="weight" class="form-control" value="">
                            </div>
                        </div>
                    </div>
                </div>

                <div class="row">
                    <div class="col-sm-12 col-lg-12">
                        <div class="form-group form-group-lg">
                            <label class="col-sm-4 col-lg-4 control-label" for="height">ส่วนสูง</label>
                            <div class="col-sm-5 col-lg-5">
                                <input type="text" name="height" id="height" class="form-control" value="">
                            </div>
                        </div>
                    </div>
                </div>

                <div class="row">
                    <div class="col-sm-12 col-lg-12">
                        <div class="form-group form-group-lg">
                            <label class="col-sm-4 col-lg-4 control-label" for="occupation">อาชีพ</label>
                            <div class="col-sm-5 col-lg-5">
                                <select name="occupation" id="occupation" class="form-control select2 checkNA">
                                    @foreach (var item in ViewBag.Occupation)
                                    {
                                        <option value="@item.OccupationCode" @(item.OccupationCode == ViewBag.obj.Occupation_id ? "selected" : "")>@item.OccupationDetail</option>
                                    };
                                </select>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="row">
                    <div class="col-sm-12 col-lg-12">
                        <div class="form-group form-group-lg">
                            <label class="col-sm-4 col-lg-4 control-label" for="occupationLevel">ระดับอาชีพ</label>
                            <div class="col-sm-5 col-lg-5">
                                <select name="occupationLevel" id="occupationLevel" class="form-control select2 checkNA"></select>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="row">
                    <div class="col-sm-12 col-lg-12">
                        <div class="form-group form-group-lg">
                            <label class="col-sm-4 col-lg-4 control-label" for="home_phone">โทรศัพท์บ้าน</label>
                            <div class="col-sm-5 col-lg-5">
                                <input type="text" name="home_phone" id="home_phone" class="form-control" value="">
                            </div>
                        </div>
                    </div>
                </div>

                <div class="row">
                    <div class="col-sm-12 col-lg-12">
                        <div class="form-group form-group-lg">
                            <label class="col-sm-4 col-lg-4 control-label" for="work_phone">โทรศัพท์ที่ทำงาน</label>
                            <div class="col-sm-5 col-lg-5">
                                <input type="text" name="work_phone" id="work_phone" class="form-control" value="">
                            </div>
                        </div>
                    </div>
                </div>

                <div class="row">
                    <div class="col-sm-12 col-lg-12">
                        <div class="form-group form-group-lg">
                            <label class="col-sm-4 col-lg-4 control-label" for="mobilePhone">โทรศัพท์มือถือ</label>
                            <div class="col-sm-5 col-lg-5">
                                <input type="text" name="mobilePhone" id="mobilePhone" class="form-control" value="" required="required">
                            </div>
                        </div>
                    </div>
                </div>
                <hr />
                <div class="row">
                    <div class="col-sm-12 col-lg-12">
                        <div class="col-sm-offset-4 col-lg-offset-4 col-sm-7 col-lg-7">
                            <div class="btn-group">
                                <button type="button" id="btnCard_address" name="btnCard_address" data-toggle="modal" href="#modal-id" class="btn btn-success">เพิ่ม</button>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-sm-12 col-lg-12">
                        <div class="form-group form-group-lg">
                            <div class="col-sm-4 col-lg-4 control-label">
                                <label class="" for="">ที่อยู่ตามบัตรประชาชน</label>
                            </div>
                            @*<div class="col-sm-1 col-lg-1">
                                    <button id="btnCard_address" name="btnCard_address" type="button" class="btn btn-success btn-lg" data-toggle="modal" href="#modal-id">+</button>
                                </div>*@
                            <div class="col-sm-7 col-lg-7">
                                <input id="card_address" name="card_address" class="form-control" style="font-size: smaller" readonly="readonly" required="required">
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-sm-12 col-lg-12">
                        <div class="col-sm-offset-4 col-lg-offset-4 col-sm-7 col-lg-7">
                            <div class="btn-group">
                                <button type="button" class="btn btn-success" id="btnWork_address" name="btnWork_address" data-toggle="modal" href="#modal-id">เพิ่ม</button>
                                <div class="btn-group">
                                    <button type="button" class="btn btn-primary dropdown-toggle" data-toggle="dropdown">
                                        คัดลอก <span class="caret"></span>
                                    </button>
                                    <ul class="dropdown-menu" role="menu">
                                        <li><a href="#" id="CardAddressToWorkAddress">ที่อยู่ตามบัตรประชาชน</a></li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-sm-12 col-lg-12">
                        <div class="form-group form-group-lg">
                            <div class="col-sm-4 col-lg-4 control-label">
                                <label class="" for="">ที่อยู่ที่ทำงาน</label>
                            </div>
                            @*<div class="col-sm-1 col-lg-1">
                                    <button id="btnWork_address" name="btnWork_address" type="button" class="btn btn-success btn-lg" data-toggle="modal" href="#modal-id">+</button>
                                </div>*@
                            <div class="col-sm-7 col-lg-7">
                                <input id="work_address" name="work_address" class="form-control" style="font-size: smaller" readonly="readonly" required="">
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-sm-12 col-lg-12">
                        <div class="col-sm-offset-4 col-lg-offset-4 col-sm-7 col-lg-7">
                            <div class="btn-group">
                                <button type="button" class="btn btn-success" id="btnCur_address" name="btnCur_address" data-toggle="modal" href="#modal-id">เพิ่ม</button>
                                <div class="btn-group">
                                    <button type="button" class="btn btn-primary dropdown-toggle" data-toggle="dropdown">
                                        คัดลอก <span class="caret"></span>
                                    </button>
                                    <ul class="dropdown-menu" role="menu">
                                        <li><a href="#" id="CardAddressToCurrentAddress">ที่อยู่ตามบัตรประชาชน</a></li>
                                        <li><a href="#" id="WorkAddressToCurrentAddress">ที่อยู่ที่ทำงาน</a></li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-sm-12 col-lg-12">
                        <div class="form-group form-group-lg">
                            <div class="col-sm-4 col-lg-4 control-label">
                                <label class="" for="">ที่อยู่ปัจจุบัน</label>
                            </div>
                            @*<div class="col-sm-1 col-lg-1">
                                    <button id="btnCur_address" name="btnCur_address" type="button" class="btn btn-success btn-lg" data-toggle="modal" href="#modal-id">+</button>
                                </div>*@
                            <div class="col-sm-7 col-lg-7">
                                <input id="cur_address" name="cur_address" class="form-control" style="font-size: smaller" readonly="readonly" required="required">
                            </div>
                        </div>
                    </div>
                </div>

                @*<div class="row">
                        <div class="col-sm-12 col-lg-12">
                            <div class="form-group form-group-lg">
                                <div class="col-sm-offset-4 col-lg-offset-4 col-sm-4 col-lg-4">
                                    <button type="submit" class="btn btn-info" style="width: 100%">ถัดไป</button>
                                </div>
                            </div>
                        </div>
                    </div>*@
                <!-- element ที่ซ่อนไว้เพื่อใช้เก็บค่า-->
                <input type="hidden" id="cur_AddressID" name="cur_AddressID" />
                <input type="hidden" id="work_AddressID" name="work_AddressID" />
                <input type="hidden" id="card_AddressID" name="card_AddressID" />
                <input type="hidden" id="hidden_districtId" name="hidden_districtId" />
                <input type="hidden" id="hidden_subdistrictId" name="hidden_subdistrictId" />
                <input type="hidden" id="hidden_AppId" name="hidden_AppId" />
                <input type="hidden" id="hidden_addressType" name="hidden_addressType" />
                <input type="hidden" id="hidden_occupationLevelId" name="hidden_occupationLevelId" />
                <input type="hidden" id="hidden_CreateById" name="hidden_CreateById" />
                <input type="hidden" id="hidden_titleName" name="hidden_titleName" />
                <hr />
            </div>
        </fieldset>
        <hr />
        <div class="row">
            <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 bgButton">
                <button type="submit" class="btnNext" style="width: 100%">ถัดไป</button>
            </div>
        </div>
    </form>
</div>

<!--Modal-->
<form class="form-horizontal" id="modal-Address">
    <div class="modal fade" id="modal-id">
        <div class="modal-dialog ">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">×</span>
                    </button>
                    <h4 class="modal-title">ที่อยู่</h4>
                </div>
                <div class="modal-body">
                    <fieldset>
                        <div class="row">
                            <div class="col-sm-12 col-lg-12">
                                <div class="form-group form-group-lg">
                                    <label class="col-sm-3 col-lg-3 control-label" for="select_typeaddress">ประเภทที่อยู่</label>
                                    <div class="col-sm-8 col-lg-8">
                                        <select name="select_typeaddress" id="select_typeaddress" class="form-control select2" style="width: 100%">
                                            @foreach (var item in ViewBag.AddressType)
                                            {
                                                <option value="@item.AddressType_ID">@item.AddressTypeDetail</option>
                                            }
                                        </select>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-sm-12 col-lg-12">
                                <div class="form-group form-group-lg">
                                    <label class="col-sm-3 col-lg-3 control-label" for="modal_division">หน่วยงาน</label>
                                    <div class="col-sm-8 col-lg-8">
                                        <input type="text" id="modal_division" name="modal_division" class="form-control"
                                               placeholder="หน่วยงาน">
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-sm-12 col-lg-12">
                                <div class="form-group form-group-lg">
                                    <label class="col-sm-3 col-lg-3 control-label" for="modal_village">หมู่บ้าน</label>
                                    <div class="col-sm-8 col-lg-8">
                                        <input type="text" id="modal_village" name="modal_village" class="form-control"
                                               placeholder="หมู่บ้าน">
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-sm-12 col-lg-12">
                                <div class="form-group form-group-lg">
                                    <label class="col-sm-3 col-lg-3 control-label" for="modal_no">เลขที่</label>
                                    <div class="col-sm-8 col-lg-8">
                                        <input type="text" id="modal_no" name="modal_no" class="form-control"
                                               placeholder="หมู่เลขที่" required="required">
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-sm-12 col-lg-12">
                                <div class="form-group form-group-lg">
                                    <label class="col-sm-3 col-lg-3 control-label" for="modal_moo">หมู่ที่</label>
                                    <div class="col-sm-8 col-lg-8">
                                        <input type="text" id="modal_moo" name="modal_moo" class="form-control"
                                               placeholder="หมู่ที่" required="required">
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-sm-12 col-lg-12">
                                <div class="form-group form-group-lg">
                                    <label class="col-sm-3 col-lg-3 control-label" for="modal_floor">ชั้น</label>
                                    <div class="col-sm-8 col-lg-8">
                                        <input type="text" id="modal_floor" name="modal_floor" class="form-control"
                                               placeholder="ชั้น">
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-sm-12 col-lg-12">
                                <div class="form-group form-group-lg">
                                    <label class="col-sm-3 col-lg-3 control-label" for="modal_road">ถนน</label>
                                    <div class="col-sm-8 col-lg-8">
                                        <input type="text" id="modal_road" name="modal_road" class="form-control"
                                               placeholder="ถนน">
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-sm-12 col-lg-12">
                                <div class="form-group form-group-lg">
                                    <label class="col-sm-3 col-lg-3 control-label" for="modal_alley">ซอย</label>
                                    <div class="col-sm-8 col-lg-8">
                                        <input type="text" id="modal_alley" name="modal_alley" class="form-control"
                                               placeholder="ซอย">
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-sm-12 col-lg-12">
                                <div class="form-group form-group-lg">
                                    <label class="col-sm-3 col-lg-3 control-label" for="modal_province">จังหวัด</label>
                                    <div class="col-sm-8 col-lg-8">
                                        <select name="modal_province" id="modal_province" class="form-control select2 checkNA" style="width: 100%">
                                            @foreach (var item in ViewBag.ProvinceList)
                                            {
                                                <option value="@item.Province_ID" )>@item.ProvinceDetail</option>
                                            }
                                        </select>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-sm-12 col-lg-12">
                                <div class="form-group form-group-lg">
                                    <label class="col-sm-3 col-lg-3 control-label" for="modal_district">อำเภอ</label>
                                    <div class="col-sm-8 col-lg-8">
                                        <select name="modal_district" id="modal_district" class="form-control select2 checkNA" style="width: 100%"></select>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-sm-12 col-lg-12">
                                <div class="form-group form-group-lg">
                                    <label class="col-sm-3 col-lg-3 control-label" for="modal_subdistrict">ตำบล</label>
                                    <div class="col-sm-8 col-lg-8">
                                        <select name="modal_subdistrict" id="modal_subdistrict" class="form-control select2 checkNA" style="width: 100%"></select>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-sm-12 col-lg-12">
                                <div class="form-group form-group-lg">
                                    <label class="col-sm-3 col-lg-3 control-label" for="modal_zipcode">รหัสไปรษณีย์</label>
                                    <div class="col-sm-8 col-lg-8">
                                        <input type="number" value="" name="modal_zipcode" id="modal_zipcode" class="form-control" placeholder="รหัสไปรษณีย์" required="" />
                                    </div>
                                </div>
                            </div>
                        </div>
                    </fieldset>
                </div>
                <div class="modal-footer">
                    <div class="clearfix "></div>
                    <div class="row">
                        <div class="col-sm-12 col-lg-12">
                            <div class="form-group form-group-lg">
                                <div class="col-xs-6 col-sm-6  col-md-6 col-lg-6  Asetmarginformcontrol">
                                    @*<button type="submit" class="btn btn-primary" id="modal_save">Save</button>*@
                                    <button type="button" class="btn btn-primary" name="modal_save" id="modal_save">Save</button>
                                </div>
                                <div class="col-xs-6 col-sm-6  col-md-6 col-lg-6  Asetmarginformcontrol setleftt">
                                    <button type="button" class="btn btn-default" name="modal_close" id="modal_close" data-dismiss="modal">Close</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</form>

@section scripts{
    <script>
        $(function () {
            GetApplicationDetail();
            GetOccupationLevel($('#occupation').val());
            GetDistrict($('#modal_province').val());

            //occupation change
            $('#occupation').change(function () {
                GetOccupationLevel($('#occupation').val());
                $('#hidden_occupationLevelId').val('');
            });

            //province change
            $('#modal_province').change(function () {
                $('#hidden_districtId').val("");
                $('#hidden_subdistrictId').val("");
                GetDistrict($('#modal_province').val());

            });

            //district change
            $('#modal_district').change(function () {
                //debugger;
                $('#hidden_subdistrictId').val("");
                GetSubDistrict($('#modal_district').val());

            });

            //subdistrict change
            $('#modal_subdistrict').change(function () {
                GetZipCode($('#modal_subdistrict').val());
            });

            $('#btnCur_address').click(function () {
                $("#modal-Address").validate().resetForm();
                if ($('#cur_AddressID').val() != null || $('#cur_AddressID').val() != "") {
                    GetModalAddress("2", $('#cur_AddressID').val()); //ที่ปัจจุบัน
                    $('#hidden_addressType').val("2");
                }
                else {
                    $('#select_typeaddress').val("2").trigger('change');
                }
            });

            $('#btnCard_address').click(function () {
                $("#modal-Address").validate().resetForm();
                if ($('#card_AddressID').val() != null || $('#card_AddressID').val() != "") {
                    GetModalAddress("3", $('#card_AddressID').val());; //ที่ตามบัตร
                    $('#hidden_addressType').val("3");
                }
                else {
                    $('#select_typeaddress').val("3").trigger('change');
                }

            });

            //btnWork_Address Click
            $('#btnWork_address').click(function () {
                $("#modal-Address").validate().resetForm();
                if ($('#work_AddressID').val() != null || $('#work_AddressID').val() != "") {
                    GetModalAddress("4", $('#work_AddressID').val()); //ที่ทำงาน
                    $('#hidden_addressType').val("4");
                }
                else {
                    $('#select_typeaddress').val("4").trigger('change');
                }

            });

            //copyAddress
            $('#CardAddressToWorkAddress').click(function (e) {
                e.preventDefault();
                if ($('#card_address').val() != "") {
                    CopyAddress($('#card_AddressID').val(), $('#work_AddressID').val(), "4"); //คัดลอกที่อยู่บัตรไปยังที่อยู่ที่ทำงาน
                }
            });

            $('#CardAddressToCurrentAddress').click(function (e) {
                e.preventDefault();
                if ($('#card_address').val() != "") {
                    CopyAddress($('#card_AddressID').val(), $('#cur_AddressID').val(), "2"); //คัดลอกที่อยู่บัตรไปยังที่อยู่ปัจจุบัน
                }
            });

            $('#WorkAddressToCurrentAddress').click(function (e) {
                e.preventDefault();
                if ($('#work_address').val() != "") {
                    CopyAddress($('#work_AddressID').val(), $('#cur_AddressID').val(), "2"); //คัดลอกที่อยู่ที่ทำงานไปยังที่อยู่ปัจจุบัน
                }
            });

            //validate
            $("#modal-Address").validate();

            //btnModalSave Click
            $('#modal_save').click(function () {
                if ($("#modal-Address").valid() == true) {
                    SetAddress($('#hidden_addressType').val());
                    $('#modal_close').click();
                };
            });

            //change keyup
            $('#id_card').on("change paste keyup",
            function () {
                //Call method Check identityCard
                $('#id_card').css("color", "black");
                var idcard = $('#id_card').val();
                if (idcard.length == 13) {
                    if (CheckIdentityCard(idcard) == true) {
                        //alert("true");
                        $('#id_card').css('color', 'green');
                    } else {
                        //alert("false");
                        $('#id_card').css('color', 'red');
                        $('#id_card').focus();
                    }
                };
            });

        });

        function CopyAddress(formAddress, toAddress, addressType) {
            $.ajax({
                type: "POST",
                url: "@ViewBag.APIUrlApplication/MobileApi/Address/setcopyaddress",
                data: {
                    "fromAdressId": formAddress,
                    "toAddressId": toAddress
                },
                success: function (response) {
                    GetModalAddress(addressType, toAddress);
                },
                error: function (xhr, error) {
                    alert(xhr.responseText);
                }
            });
        }

        function GetModalAddress(addressType, addressId) {
            //debugger;
            $('#select_typeaddress').val(addressType).trigger('change');
            $('#select_typeaddress').prop("disabled", true);
            $.ajax({
                type: "GET",
                url: "@ViewBag.APIUrlApplication/MobileApi/Address/AddressPH?addressId=" + addressId,
                success: function (response) {
                    //debugger;
                    $('#modal_division').val(response.buildingName);
                    $('#modal_village').val(response.villageName);
                    $('#modal_no').val(response.no);
                    $('#modal_moo').val(response.moo);
                    $('#modal_floor').val(response.floor);
                    $('#modal_road').val(response.road);
                    $('#modal_alley').val(response.soi);
                    if (response.province_id != null) {
                        $('#modal_province').val(response.province_id).trigger('change');
                    } else {
                        $('#modal_province').val("9999999").trigger('change');
                    }
                    if (response.amphoe_id != null) {
                        $('#hidden_districtId').val(response.amphoe_id);
                    }
                    if (response.tumbol_id != null) {
                        $('#hidden_subdistrictId').val(response.tumbol_id);
                    }

                    $('#modal_zipcode').val(response.zipCode);

                    switch (addressType) {
                        case "2":
                            $('#cur_address').val(response.addressFullDetail);
                            break;
                        case "3":
                            $('#card_address').val(response.addressFullDetail);
                            break;
                        case "4":
                            $('#work_address').val(response.addressFullDetail);
                            break;
                        default:
                            break;
                    }

                }
            });

        }

        function GetApplicationDetail() {
            $('#id_card').val('@ViewBag.obj.ZCard_id');
            $('#firstName').val('@ViewBag.obj.FirstName');
            $('#lastName').val('@ViewBag.obj.LastName');
            $('#birthdate').val('@ViewBag.obj.BirthDate.ToString("yyyy-MM-dd")');
            $('#passport').val('@ViewBag.obj.PassportCardID');
            $('#officercard').val('@ViewBag.obj.GovermentCardID');
            $('#weight').val('@ViewBag.obj.Weight');
            $('#height').val('@ViewBag.obj.Height');

            $('#home_phone').val('@ViewBag.obj.HomePhoneNumber');
            $('#work_phone').val('@ViewBag.obj.WorkPhoneNumber');
            $('#mobilePhone').val('@ViewBag.obj.MobilePhoneNumber');

            $('#work_address').val('@ViewBag.WorkAddress.AddressFullDetail');
            $('#cur_address').val('@ViewBag.ContactAddress.AddressFullDetail');
            $('#card_address').val('@ViewBag.HomeAddress.AddressFullDetail');

            $('#cur_AddressID').val('@ViewBag.obj.ContactAddress_id');
            $('#work_AddressID').val('@ViewBag.obj.WorkAddress_id');
            $('#card_AddressID').val('@ViewBag.obj.HomeAddress_id');

            $('#hidden_AppId').val('@ViewBag.AppId');
            $('#hidden_occupationLevelId').val('@ViewBag.obj.OccupationLevel_id');
            $('#hidden_CreateById').val('@ViewBag.CreatedBy_id');
            $('#hidden_titleName').val('@ViewBag.obj.Title_id');
        }

        function GetOccupationLevel(occupationId) {
            $.ajax({
                type: "GET",
                url: "@ViewBag.APIUrlApplication/MobileApi/Mobile/OccupationLevels?occupationCode=" + occupationId,
                //async: false, //ทำฟังก์ชั่นนี้ให้เสร็จก่อน
                success: function (response) {
                    $('#occupationLevel').empty();
                    for (var i = 0; i < response.length; i++) {
                        $('#occupationLevel').append('<option value="' + response[i].temp1 + '">' + response[i].occupationLevelDetail + '</option>');
                    }

                    if ('@ViewBag.obj.OccupationLevel_id' != '' && '@ViewBag.obj.OccupationLevel_id' == $('#hidden_occupationLevelId').val()) {
                        $('#occupationLevel').val('@ViewBag.obj.OccupationLevel_id');
                    }

                }
            });
        }

        //set address
        function SetAddress(addressType) {
            var addressId = "0";
            switch (addressType) {
                case "2":
                    addressId = $('#cur_AddressID').val();
                    break;
                case "3":
                    addressId = $('#card_AddressID').val();
                    break;
                case "4":
                    addressId = $('#work_AddressID').val();
                    break;
                default:
                    break;
            }
            $.ajax({
                type: "POST",
                url: "@ViewBag.APIUrlApplication/MobileApi/Address/AddressPH",
                data: {
                    "addressId": addressId,
                    "buildingName": $('#modal_division').val(),
                    "villageName": $('#modal_village').val(),
                    "no": $('#modal_no').val(),
                    "moo": $('#modal_moo').val(),
                    "floor": $('#modal_floor').val(),
                    "soi": $('#modal_alley').val(),
                    "road": $('#modal_road').val(),
                    "subDistrictId": $('#modal_subdistrict').val(),
                    "updateById": $('#hidden_CreateById').val()
                },
                success: function (response) {

                    //get address
                    GetModalAddress(addressType, response.address_ID);

                },
                error: function (xhr, error) {
                    alert(xhr.responseText);
                }
            });
        }

        //get district
        function GetDistrict(provinceId) {
            $.ajax({
                type: "GET",
                url: "@ViewBag.APIUrlApplication/MobileApi/Address/District?provinceId=" + provinceId,
                //async: false, //ทำฟังก์ชั่นนี้ให้เสร็จก่อน
                success: function (response) {
                    $('#modal_district').empty();
                    for (var i = 0; i < response.length; i++) {
                        $('#modal_district').append('<option value="' + response[i].district_ID + '">' + response[i].districtDetail + '</option>');
                    }

                    if (provinceId != "9999999" && $('#hidden_districtId').val() != "") {
                        $('#modal_district').val($('#hidden_districtId').val());
                        GetSubDistrict($('#hidden_districtId').val());
                    }
                    else {
                        GetSubDistrict(response[0].district_ID);
                    }

                }
            });
        }

        //get subdistrict
        function GetSubDistrict(districtId) {
            $.ajax({
                type: "GET",
                url: "@ViewBag.APIUrlApplication/MobileApi/Address/SubDistrict?districtId=" + districtId,
                success: function (response) {

                    $('#modal_subdistrict').empty();
                    for (var i = 0; i < response.length; i++) {
                        $('#modal_subdistrict').append('<option value="' + response[i].subDistrict_ID + '">' + response[i].subDistrictDetail + '</option>');
                    }

                    if (districtId != "9999999" && $('#hidden_subdistrictId').val() != "") {
                        $('#modal_subdistrict').val($('#hidden_subdistrictId').val());
                        //GetZipCode($('#hidden_subdistrictId').val());
                    }
                    else {
                        $('#modal_zipcode').val(response[0].zipCode);
                    }

                }
            });
        }

        //get zipcode
        function GetZipCode(subDistrictId) {
            $.ajax({
                type: "GET",
                url: "@ViewBag.APIUrlApplication/MobileApi/Address/zipCode?SubDistrictid=" + subDistrictId,
                success: function (response2) {
                    $('#modal_zipcode').val(response2.zipCode);
                }
            });
        }

        //Check id card
        function CheckIdentityCard(cardId) {
            if (cardId.length != 13) return false;
            var sum = 0;
            for (var i = 0; i < 12; i++) {
                sum += parseFloat(cardId.charAt(i)) * (13 - i);
            }
            if ((11 - (sum % 11)) % 10 != parseFloat(cardId.charAt(12))) {
                return false;
            }

            return true;
        }
    </script>
}